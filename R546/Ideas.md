B. 比较经典的贪心，做得太久了。基本就是先取完一边再取完另一边。

C. 操作的意义是，只会改变左下-右上对角线上的数字的位置。因此每一条左下-右上对角线的数字拉出来排个序，a和b要相等。

D. 对于p[n]和前面的每个人i来说，如果p[n]想要跨越TA往前插队，那么TA们之间的所有人都要消失，要么跟p[n]换，要么跟i换。

   因此从后往前扫，对于p[n]来说，一个人j要么被TA换到后面去，要么就暂时跟p[n]存在一个集合里；
   
   然后剩下的再前面的k要能跟这个集合里所有的人换，否则就加入这个集合。这样大概是n+m*log(n)复杂度。
   
E. 线段树。对于每次修改，在i上加x时，应该可以二分一个变化的右边界j，然后i到j之间的值就会变成形如a[i]+x+sum{k[j-1]+k[j-2]+...+k[i]}。

   可以发现这个和可以通过维护a[i]+x这部分和sum{k[1]+...+k[i-1]}这部分来维护。然后对于每个j，只要sum{k[j-1]+...k[1]}-sum{k[i-1]+...+k[1]}就可以了。

B. 看全部从上面拿OR全部从下面拿，是否能碰到。

C. a为+1，b为-1，看前缀和。

***D. 正难则反。可以构造不含逆序对的subsegment为n\*(n+1)/2-k的串。方法是用一些小的顺序subsegment放到一起。先dp出长度的组合方案，然后大的放前面小的放后面。***

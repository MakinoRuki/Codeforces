A. 必须都跟最后一个字符相等。

B. 如果b<=a/n,那么移到b即可，就1次；如果a/n<b<a,那么必然开始放在a可以后来放在b可以；如果b=a，那么也就1次，移到a/b即可。

C. 经典set贪心。存好邻接关系，然后把(max(a[i],a[i+1]),(i,i+1))存到set里，贪心地从小到大取，然后维护左右相邻关系即可。

D. dp。可以枚举最后出现在结果set里的是哪些数。如果某个数x要出现，那么所有它的copy都可以选进来帮它成为mode。假设最后要选的数字集合是S，那么不在S里的数字只要保证每一种的个数都没有超过S中数字总和即可。因此排序，dp[i,j]表示前i个数中选中的数字个数总和是j的方案数，然后在dp到i的时候把它作为选中的max，跟第n个也就是全局max比较出现次数。特别地当dp到n时自然合法。

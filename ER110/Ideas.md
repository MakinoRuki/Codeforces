C. dp[i]表示以i结尾的合法substring有多少。

D. 从后往前看是在维护一棵二叉树，每个节点维护这棵子树里面多少可能的根节点。update某点的时候一路update它的父节点。

E. 二分+rmq求树节点的父亲。

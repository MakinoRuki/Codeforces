C. 二分答案，n^2验证。

E1. 首先对于一个节点来说一定是它的部分子树节点全部比它小，部分子树节点全部比它大是最优的。至于哪些子树全小哪些全大可以背包dp。

对每个节点都背包最后最大值加和即可。对子树只要递归进去。

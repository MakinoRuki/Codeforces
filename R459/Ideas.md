A. 枚举seg[l,r]的起点，然后往后扫遇到"?"先去满足左括号，但要标记为临时满足；后面如果右括号无法满足就来替换。

B. 记忆化搜，经典game题。

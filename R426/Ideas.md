C. 求出a*b的三次根r然后a%r==0,b%r==0,(a/r)*(b/r)==r。

D. 直接dp[i,j]表示前i段覆盖到j这个位置，然后对于a[j]的前一个相等位置k，[k,j-1]的dp值都要+=1。因此用线段树lazy操作维护这个区间add。

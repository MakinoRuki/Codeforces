B. 最小值就是看左边的n和右边连的最小哪一个；最大值就是左边的1和右边连的最小的哪一个。但是最小的时候有坑。
C. 维护单调栈。
D. 扫描线+线段离散化+状压dp(2^8)+滚动数组优化。

D. 按照行列对角线分类存放并按照行排序，枚举两个点之后二分在[l,r]范围内有没有其它棋子。

E. 黑白联通块缩点之后变成新的树，其实可以发现当枚举一个根之后是一层一层地去变色扩展的。

   因此要找出一个点它到最远leaf的距离最小。那么这个其实就是直径中点。

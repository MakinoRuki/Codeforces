C. 二分。
D. 操作的意义：保留连续的一段[i,j]，把[1,i-1]和[j+1,n]移到两端。因此找出范围不相交的连续的最长的一段。
E. 每个点要选出不超过k条邻接边，使边的权值和最大。树形dp，维护选连接父节点的边or不选。
F. 合法子序列可以分成更小的连续的几个合法子序列，方案数可以dp。我们要处理出nxt[l]表示左端点为l最小合法序列的右端点的位置r。
   这个可以由nxt[l+1]转移而来，但是必须满足a[l]==a[nxt[l+1]+1]。
   因此我们还要维护数组nxtx[l,a]表示左端点为l，右端点+1的值为a的合法序列最小右端点r，因此nxt[l]=nxtx[l+1,a[l]]。
   而nxtx[l]可以由nxtx[nxt[l]+1]||nxtx[l,a[nxt[l]+1]=nxt[l]+1得到。

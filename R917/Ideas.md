B. 首先长度不同则substring也必然不同。长度相同的时候如果长度是x，那么都是后x个字符加上前n-x个字符中挑一个，只要看前n-x中有多少个不同的字符就可以。

C. 在清0之后，不可能存在两个位置i和j同时满足a[i]=i和a[j]=j。因此后面就是每两次得分1。清0之前可以直接模拟，模拟步数不需要超过2N因为可以通过清0之后的2N步得到同样的得分。

D. 对于同一个p[i]，不同的q[j]自然是递增的，主要看不同p[i]之间。对于p[i]和p[j]分大小关系讨论，对于一个p[i]如果它前面的p[j]跟它的2的power差2^x，那么用bit统计，放到bit中为x的地方。
